# Отдельное Info по созданию VM на рабочем сервере для того, чтобы на 1-ь адаптере был NAT а на 2-м Сетевой мост

# Устанавливать Debian придется на 4 виртуальные машины с объемом первичного диска SSD 1Tb
# Использовать менеджер загрузки образа Debian
# Скачать стабильную последнюю серверную версию
# Устанавливать по внутренней сети хост-VM1-VM2-VM3-VM4 из хоста по протокол HTTP
# Сервера будут назваться так: srs11, srs12, srs21, srs22
# Также должны быть закачаны firmware дополнения к Debian, например bnx2 и установлены на каждый сервер

# Отредактировать hostname для каждого сервера по предлагаемому списку (дополню)
# Отредактировать hosts для каждого сервера
# Отредактировать interfaces для каждого сервера
# Отредактировать и настроить системные репозитории для каждого сервера
# Установить и настроить HTPD для каждого сервера
# Установить и настроить SSHd для каждого сервера
# Установить и настроить Midnight Commander для каждого сервера
# Установить и настроить Sudo для каждого сервера
# Настроить сетевые адреса дисковых хранилищ для каждого сервера (Внешний RAID-массив 2 адаптера по 4 диска)
# Установить и настроить open-iSCSI для каждого сервера

# После установки и настройки будет установка рабочего софта на каждый сервер. (Дополнительно подготовлю)


[
  "claster":
  [
      {
        "name": "srs11", 
        "type": "server",
        "interfaces": ["eth0", "eth1"],
        "description": "Сервер приложений 11",
        "connections": [
          {
            "interface": "eth0",
            "connectedTo": "router1"
          },
          {
            "interface": "eth1",
            "connectedTo": "router2"
          },
          {
            "interface": "iLO", 
            "connectedTo": "router3"
          }
        ]
      },
      {
        "name": "srs12", 
        "type": "server",
        "interfaces": ["eth0", "eth1"],
        "description": "Сервер приложений 12",
        "connections": [
          {
            "interface": "eth0",
            "connectedTo": "router1"
          },
          {
            "interface": "eth1",
            "connectedTo": "router2"
          },
          {
            "interface": "iLO", 
            "connectedTo": "router3"
          }
        ]
      },
      {
        "name": "srs21", 
        "type": "server",
        "interfaces": ["eth0", "eth1"],
        "description": "Сервер приложений 21",
        "connections": [
          {
            "interface": "eth0",
            "connectedTo": "router1"
          },
          {
            "interface": "eth1",
            "connectedTo": "router2"
          },
          {
            "interface": "iLO", 
            "connectedTo": "router3"
          }
        ]
      },
      {
        "name": "srs22", 
        "type": "server",
        "interfaces": ["eth0", "eth1"],
        "description": "Сервер приложений 22",
        "connections": [
          {
            "interface": "eth0",
            "connectedTo": "router1"
          },
          {
            "interface": "eth1",
            "connectedTo": "router2"
          },
          {
            "interface": "iLO", 
            "connectedTo": "router3"
          }
        ]
      },
  ]

  {
    "name": "router1",
    "type": "router",
    "interfaces": ["eth0", "eth1"],
    "description": "Маршрутизатор серверов к внешней сети 1",
    "connections": [
      {
        "interface": "eth0",
        "connectedTo": ["srs11", "srs12", "srs21", "srs22"]
      },
      {
        "interface": "eth1",
        "connectedTo": "Внешняя сеть 1"
      }
    ]
  },
  {
    "name": "router2",
    "type": "router",
    "interfaces": ["eth0", "eth1"],
    "description": "Маршрутизатор серверов к внешней сети 2",
    "connections": [
      {
        "interface": "eth0",
        "connectedTo": ["srs11", "srs12", "srs21", "srs22"]
      },
      {
        "interface": "eth1",
        "connectedTo": "Внешняя сеть 2"
      }
    ]
  },
  {
    "name": "router3",
    "type": "router",
    "interfaces": ["eth0", "eth1"],
    "description": "Маршрутизатор серверов к внутренней сети",
    "connections": [
      {
        "interface": "eth0",
        "connectedTo": ["srs11", "srs12", "srs21", "srs22"]
      },
      {
        "interface": "eth1",
        "connectedTo": ["Внутренняя сеть","Управление RAID-массивом","Подключение Админа и юзера"]
      }
    ]
  },
  
  ... 
  
  {
    "name": "storage",
    "type": "raid_array",
    "interfaces": ["iscsi1", "iscsi2"],
    "description": "Внешний RAID-массив",
    "connections": [
      {
        "interface": "iscsi1",
        "connectedTo": ["srs11", "srs12"]
      },
      {
        "interface": "iscsi2", 
        "connectedTo": ["srs21", "srs22"]
      }
    ],
    "Comment": "все 4 сервера подключаются как к адаптеру 1, так и ко 2-му"
  }
]

Вопросы:

0 В состав дистрибутива ПО СПД входят:
    DVD-1 – загрузочный диск базовой ОС Debian 9.
    DVD-2 – набор программных пакетов, включающих пакеты, автоматизирующие развертывание системы.
  как мне их получить? 
  Или все ставить с 0-ля?

1 Для интерфейсов "iLO" серверов указано подключение к "router3".
Что это за интерфейсы и для чего они используются?

2 В описании "router3" указано подключение к "Внутренней сети", "Управление RAID-массивом" и "Подключение Админа и юзера".
Это отдельные устройства или логические сегменты сети?
Нужно ли их дополнительно описывать?

3 Для RAID-массива указаны два iSCSI-интерфейса.
Это два отдельных RAID-контроллера или один контроллер с двумя портами?

4 Есть ли какие-либо дополнительные требования к сетевой безопасности,
например, необходимость настройки VLAN, VPN или брандмауэра между сегментами сети?

5 Какие роли и назначение будут у каждого из четырех серверов в кластере?
Это поможет определить, какое дополнительное ПО необходимо установить.



Вопросы по RAID-10 level
1 Конфигурация RAID-10 (зеркальный массив) создается однократно при первоначальной настройке сервера.

2 После создания RAID-массива его конфигурация сохраняется в RAID-контроллере и будет применяться автоматически при последующих перезагрузках.

3 Наращивание RAID-массива путем добавления новых дисков или изменение уровня RAID не планируется.

4 Дополнительная настройка RAID-контроллера после создания массива не требуется.

5 Использование LVM (Logical Volume Manager) поверх RAID-массива не предусмотрено.


Как только у меня будут все необходимые сведения,
я смогу подготовить полный развернутый план действий
по установке и настройке всей инфраструктуры, включая:

* Создание виртуальных машин для серверов
* Установку и начальную настройку ОС Debian
* Настройку сетевых интерфейсов, маршрутизаторов, VLAN (если требуется)
* Создание и подключение RAID-массива
* Установку и конфигурацию необходимого серверного ПО
* Настройку правил безопасности, брандмауэров, VPN (если требуется)
* другие задачи, которые связаны с установкой Docker инфраструктурой и пр.


